  
<!--
<meta Content-Disposition: form-data; name="targetFile"; >
-->
<meta Content-Disposition: form-data; name="targetFile"; filename="test.txt">
<script type="text/javascript" src="/js/jquery-1.3.2.min.js"></script>
<script>
//if (window.navigator.userAgent.indexOf("MSIE")>=1) alert('ie');
//if (window.navigator.userAgent.indexOf("Firefox")>=1) alert('ff');
//if(window.navigator.userAgent.indexOf("Chrome")>=1) alert('chrome');
function readFile2(obj){
    $("#img1").attr('src',obj.value);
alert(obj.value);
    //$("#img2").attr('src',obj.value);
    var img = new Image();
    img.src = obj.value;
    //alert(img.width);
    //alert(img.height);
    alert(img.fileSize);
    alert(getFileSize(obj.value));
}
function getFileSize(filePath)
{
   var fso = new ActiveXObject("Scripting.FileSystemObject");
   alert("文件大小为："+(fso.GetFile(filePath)).size);
}
</script>
<img id="img1" width="120" height="60">
<img id="img2" style="left:-9000px;top:-9000px;position:absolute;">
FileReader Test
<input type="file"  onchange="readFile2(this)">
<br/>

<script>
if (window.File) {
  // File APIに関する処理を記述
  //window.alert("File APIが実装されてます。");
} else {
  //window.alert("本ブラウザではFile APIが使えません");
} 
function readFile(obj){
    var file = obj.files[0];
    if(!/image\/\w+/.test(file.type)){
        alert("请确保文件为图像类型");
        return false;
    }

    var reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = function(e){
        $("#img1").attr("src",this.result);
        $("#img2").attr("src",this.result);
        alert(file.size);
    }
}

</script>
FileReader Test
<input type="file" onchange="readFile(this)">
<div id="demo_result">
</div>

<script language="javascript">
$(function(){
    $("#f1").change(function(){
        var f1 = $("#f1").get(0);
        $("#img1").attr("src",f1.files[0].getAsDataURL());
        $("#img2").attr("src",f1.files[0].getAsDataURL());

    });
    $("#img2").load(function (){
    alert(this.width+";"+this.height);
    }
    );
});
</script>
<style type="text/css">
    #large{position:absolute;display:none;z-index:999;}
</style>

<form name="form1" id="form1">
<div id="demo">
<input id="f1" name="f1" type="file" />

</div>
<div id="large"></div>
</form>
